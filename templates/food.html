{% extends "layout.html" %}

{% block title %}
Nutrition Facts
{% endblock %}

{% block main %}

<!-- foods description  -->
<h2 class="text-center">{{ food.description }}</h2>
<div class="label">
  <header>
    <h1 class="bold">Nutrition Facts</h1>
    <div class="divider"></div>
    <p class="bold">Serving size <span>100g</span></p>
  </header>
  <div class="divider large"></div>
  <div class="calories-info">
    <div class="left-container">
      <h2 class="bold small-text">Amount per serving</h2>
      <p>Calories</p>
    </div>
    <span id="Energy-value">.</span>
  </div>
  <div class="divider medium"></div>
  <div class="daily-value small-text">
    <p class="bold right no-divider">% Daily Value *</p>
    <div class="divider"></div>
    <p><span><span class="bold">Total Fat</span> <span id="Total lipid (fat)-value">.%</span></p>
    <p class="indent no-divider">Saturated Fat .%</span></p>
    <div class="divider"></div>
    <span></span>
    <p class="indent no-divider"><span><i>Trans</i> <span id="Fatty acids, total trans-value">.g</span></span></p>
    <span></span>
    <p class="indent no-divider"><span><i>Trans</i> Fat 0g</span></p>
    <span></span>
    <div class="divider"></div>
    <p><span><span class="bold">Cholesterol</span><span id="Cholesterol-value"> .%</span></p>
    <p><span><span class="bold">Sodium</span> <span id="Sodium, Na-value">.%</span></p>
    <p><span><span class="bold">Total Carbohydrate</span> <span id="Carbohydrate, by difference-value">.%</span></p>
    <p class="indent no-divider">Dietary Fiber .g</p>
    <div class="divider"></div>
    <span></span>
    <p class="indent no-divider">Total Sugars <span id="Total Sugars-value">.</span>g</p>
    <span></span>
    <p class="indent no-divider">Total Sugars <span id="Sugars, total including NLEA-value">.</span></p>
    <span></span>
    <p class="indent no-divider">Total Sugars 0g</p>
    <span></span>
    <div class="divider"></div>
    <p class="no-divider"><span class="bold">Protein</span> <span id="Protein-value">.g</span></p>
    <div class="divider large"></div>
    <span></span>
    <span></span>
    <p>.%</span></p>
    <span></span>
    <span></span>
    <p>Calcium .%</span></span></p>
    <p>Iron .%</span></span></p>
    <span></span>
    <p>Iron .%</span></span></p>
    <span></span>
  </div>
  <p class="small-info note">* Percent Daily Values are based on a 2,000 calorie diet. Your daily values may be higher
    or lower depending on your calorie needs:</p>
  <table class="facts small-info">
    <thead>
      <tr>
        <td colspan="2"></td>
        <th>Calories:</th>
        <th>2,000</th>
        <th>2,500</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th colspan="2">Total Fat</th>
        <td>Less than</td>
        <td>65g</td>
        <td>80g</td>
      </tr>
      <tr>
        <td class="blank-cell"></td>
        <th>Saturated Fat</th>
        <td>Less than</td>
        <td>20g</td>
        <td>25g</td>
      </tr>
      <tr>
        <th colspan="2">Cholesterol</th>
        <td>Less than</td>
        <td>300mg</td>
        <td>300 mg</td>
      </tr>
      <tr>
        <th colspan="2">Sodium</th>
        <td>Less than</td>
        <td>2,400mg</td>
        <td>2,400mg</td>
      </tr>
      <tr>
        <th colspan="3">Total Carbohydrate</th>
        <td>300g</td>
        <td>375g</td>
      </tr>
      <tr>
        <td class="blank-cell"></td>
        <th colspan="2">Dietary Fiber</th>
        <td>25g</td>
        <td>30g</td>
      </tr>
    </tbody>
  </table>
</div>
<br>
<form class="form-inline" action="/food-log" method="post">
  <input type="hidden" name="food" value=".">
  <input id="serving-size-input" name="calories" placeholder="Serving Size" type="number" value="100" min="1"
    oninput="updateNutrientsValue()"> <span></span>
  <input type="hidden" name=".">
  <span></span>
  <button class="btn btn-primary" type="submit">Add to log</button>
</form>

<!-- <script>
      // Assuming originalNutrients and originalDailyValues are available
      var originalNutrients = .;
      var originalDailyValues = .;
    
      function updateNutrientsValue() {
        // Get the serving size from the input field
        var servingSize = document.getElementById('serving-size-input').value;

        // Create a copy of the original nutrients object
        var currentNutrients = JSON.parse(JSON.stringify(originalNutrients));

        // Calculate the new nutrient values and daily value percentages
        for (var nutrient in currentNutrients) {
          var originalValue = originalNutrients[nutrient].value;
          var newValue = originalValue * servingSize / 100;
          currentNutrients[nutrient].value = newValue;

          // Update the nutrient value in the label
          var nutrientElement = document.getElementById(nutrient + '-value');
          if (nutrientElement) {
            nutrientElement.textContent = newValue.toFixed(2);
          }

          // Calculate and update the daily value percentage
          var dailyValue = originalDailyValues[nutrient];
          var newPercentage = newValue / dailyValue * 100;
          var percentageElement = document.getElementById(nutrient + '-percentage');
          if (percentageElement) {
            percentageElement.textContent = newPercentage.toFixed(2) + '%';
          }

          // Update the value of the hidden input for this nutrient
          var inputElement = document.querySelector('input[name="' + nutrient + '"]');
          if (inputElement) {
            inputElement.value = newValue;
          }
        }
      }
    </script> -->



{% endblock %}

